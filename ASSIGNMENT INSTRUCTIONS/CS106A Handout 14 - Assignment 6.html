<!DOCTYPE html>
<!-- saved from url=(0091)https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Required meta tags -->
    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="./CS106A Handout 14 - Assignment 6_files/site.css" rel="stylesheet">
    <!-- jQuery library -->
    <script src="./CS106A Handout 14 - Assignment 6_files/jquery-3.4.1.min.js.download" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <title>  CS106A Handout 14 - Assignment 6</title>
  </head>

  <!-- fill to height of viewport, flex col, footer will be mt-auto -->
  <body class="d-flex flex-column min-vh-100">
    <nav class="navbar navbar-expand-md navbar-dark" role="navigation">
  <a class="navbar-brand" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/">üè†CS106A </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="navbar-collapse collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      
        
          <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#" aria-haspopup="true" aria-expanded="false"> Handouts </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/01-general-information.html">General Information</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/02-course-placement.html">Course Placement Guide</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/03-honor-code.html">Honor Code</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/lair.html">LaIR Info</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/about_staff">Teaching Team</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/04-using-karel-with-pycharm.html">Using Karel with Pycharm</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/05-assignment1.html">Assignment 1 Karel the Robot</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/06-submitting-assignments.html">Submitting Assignments</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/07-assignment2.html">Assignment 2 Khan-sole &amp; Compute</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/08-assignment3.html">Assignment 3 Lists &amp; Images</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/09-image-reference.html">Image Reference Guide</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/11-assignment4.html">Assignment 4</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/10-graphics-reference.html">Graphics Reference Guide</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/bluebook-info.html">BlueBook Information</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/practice-midterm.html">Practice Midterm</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/practice-midterm-solutions.html">Practice Midterm Solutions</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/12-assignment5.html">Assignment 5</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/midterm-solutions.html">Midterm Grades and Solutions</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/13-contest.html">Graphics/Image Contest</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html">Assignment 6</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/bajillion.html">Assignment 7</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/practice-final.html">Final Exam Info and Practice</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/practice-final-soln.html">Practice Final Solutions</a>
            
            
          </div>
          </li>
        
      
        
          <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#" aria-haspopup="true" aria-expanded="false"> Lectures </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            
             
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/01-welcome/">  1.  3/28 Welcome! </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/02-control-flow/">  2.  3/30 Control Flow </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/03-decomposition/">  3.  4/1 Decomposition </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/04-intro-python/">  4.  4/4 Intro to Python </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/05-arithmetic-expressions/">  5.  4/6 Arithmetic Expressions </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/06-control-flow-revisited/">  6.  4/8 Control Flow Revisited </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/07-functions-revisited/">  7.  4/11 Functions Revisited </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/08-parameters/">  8.  4/13 Parameters </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/09-lists/">  9.  4/15 Lists </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/10-images/">  10.  4/18 Images </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/11-listoflists/">  11.  4/20 Lists of Lists </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/12-canvas/">  12.  4/22 Wrapping Up Lists </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/13-more-graphics/">  13.  4/25 Canvas </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/14-strings/">  14.  4/27 Strings </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/15-files/">  15.  4/29 Files </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/16-dictionaries/">  16.  5/2 Dictionaries </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/17-parsing/">  17.  5/4 Nested Structures </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/18-nested-structures/">  18.  5/9 String Parsing </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/19-tuples-sorting/">  19.  5/11 Tuples Sorting </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/20-classes-objects/">  20.  5/13 Classes and Objects </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/21-ethics/">  21.  5/16 Ethics </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/22-memory/">  22.  5/18 Memory </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/23-search-indexing/">  23.  5/20 Search and Indexing </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/24-internet/">  24.  5/23 The Internet </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/25-after-106a/">  25.  5/25 Life After CS106A </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/26-advanced-python/">  26.  5/27 Advanced Python </a>
                
                  <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/lectures/27-wrap-up/">  27.  6/1 Wrap Up </a>
                
            
            
          </div>
          </li>
        
      
        
          <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#" aria-haspopup="true" aria-expanded="false"> Assignments </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            
            
              <a class="dropdown-item" href="https://docs.google.com/forms/d/e/1FAIpQLSdN6415WaOi5C0bzlRysKuAEZJbAtN920JmrdeRz-EfXtaydg/viewform">Assignment 0</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/assignments/1-Karel">Assignment 1 - Karel</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/assignments/2-KhansoleCompute">Assignment 2 - Khan-sole &amp; Compute</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/assignments/3-ListImages">Assignment 3 - Lists &amp; Images</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/assignments/4-Sand">Assignment 4 - Lists of Lists, Strings, Graphics, and Sand</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/assignments/5-WordGuess">Assignment 5 - Strings &amp; Word Guessing</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/assignments/6-BiasBars">Assignment 6 - Dictionaries &amp; BiasBars</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/assignments/7-Bajillion">Assignment 7 - Bajillion</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/assignments/8-Contest">Graphics/Image Contest</a>
            
            
          </div>
          </li>
        
      
        
          <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#" aria-haspopup="true" aria-expanded="false"> Sections </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            
            
              <a class="dropdown-item" href="https://cs198.stanford.edu/cs198/auth/default.aspx">Section Portal</a>
            
            
             <div class="dropdown-divider"></div>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/section/section1">Section 1 - Karel</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/section/section2">Section 2 - Variables &amp; Control Flow</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/section/section3">Section 3 - Lists &amp; Images</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/section/section4">Section 4 - Lists of Lists &amp; Strings</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/section/section5">Section 5 - File Reading &amp; Nested Structures</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/section/section6">Section 6 - Dictionaries &amp; Drawing</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/section/section7">Section 7 - Sorting, OOP, &amp; Memory</a>
            
            
            
              <a class="dropdown-item" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/section/section8">Section 8 - Final Exam Review</a>
            
            
          </div>
          </li>
        
      
        
          <li class="nav-item"><a class="nav-link" href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/schedule.html">üóìSchedule</a></li>
        
      
    </ul>
    <!---
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="search" id="search-text" name="query" placeholder="üîç Search CS106B..." aria-label="Search" action="search">
    </form>
    --->
  </div>
</nav>

<style>
  .navbar {
    margin-bottom: 2rem;
  }
  .navbar-dark {
    background-color: #444;
  }
 .nav-item > a {
    text-transform: uppercase;
    letter-spacing: .08rem;
    font-size: small;
    color: #bbb !important;
  }
  .nav-item > a:hover {
    color: white !important;
  }
</style>
    
    <main class="main container-fluid" role="main"><div class="body-container container-fluid" data-spy="scroll" data-target="#toc">

<h1 class="title">Handout 14 - Assignment 6</h1>

<hr>

<p class="attribution">
 Written by Mehran Sahami
</p>


    <div class="row">
        <div class="col-xs-12 col-md-10" id="content" <=""><p>May 16, 2022</p>

<h1 id="assignment-6-dictionaries-and-analyzing-data-bias">Assignment #6: Dictionaries and Analyzing Data Bias</h1>

<p><strong>Due: 12:15pm (Pacific Time) on Monday, May 23rd</strong></p>

<p><em><sup>Based on problems by Colin Kincaid, Monica Anuforo, Jennie Yang, Nick
Bowman, Chris Piech, Mehran Sahami, and Kathleen Creel</sup></em>.</p>

<hr>

<p>CS198 Advertisement: Become a teacher! At Stanford we welcome section
leaders from every walk of life ‚Äì and we teach students from all
corners of the university. Have you thought about applying to section
lead? <a href="https://cs198.stanford.edu/cs198/Apply.aspx">Learn more.</a></p>

<p>This assignment will give you lots of practice with dictionaries and
also show you how they can be used in combination with graphics to build
your very own data visualization application. You can download the
starter code for this project under the "Assignments" tab on the CS106A
website. The starter project will provide Python files for you to write
your programs in.</p>

<p>As usual, the assignment is broken up into two parts. The first part of
the assignment lets you practice writing a function with dictionaries.
The second part of the assignment is a longer program that uses
dictionaries to store information about word count data from a dataset
of reviews of professors from a popular website. Plotting and
visualizing across professor gender and review quality reveals
interesting trends about human language usage. We hope that you will be
able to use this exercise in data visualization to also think critically
about the underlying biases that exist in online datasets! The end
product of this assignment is a complete application that will help you
dig deep into our provided dataset while answering important social and
ethical questions along the way.</p>

<h2 id="sandcastle-practice-with-dictionaries">Sandcastle: Practice with Dictionaries</h2>

<p>This problem will give you practice reading a file to create a
dictionary where keys are strings and values are lists of numbers, and
then doing some computation with that dictionary. Doing this problem
will give lots of direct practice with concepts that will come up in the
second part of this assignment as well. You should write your code for
this problem in the file <code class="language-python highlighter-rouge"><span class="n">data_analysis</span><span class="p">.</span><span class="n">py</span></code>.</p>

<p>Given the current health crisis, say we want to analyze some data on
disease infections at different locations. We are given a data file,
where on each line we start with the name of a location, and then we
have seven values (integers) that indicate the <strong>cumulative</strong> number of
cases of a disease found at that location over the first seven days,
respectively. The values on each line are separated by commas, but there
can be an arbitrary number of spaces between each value and each comma.
For example, we might have the data file <code class="language-python highlighter-rouge"><span class="n">disease1</span><span class="p">.</span><span class="n">txt</span></code> shown below:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Evermore , 1, 1, 1, 1, 1, 1, 1
Vanguard City,1 ,2 ,3 ,4 ,5 ,6 ,7
Excelsior   ,1,1, 2,   3,     5,      8,       13
</span></code></pre></div></div>

<p>This file has data for three (fictional) locations (Evermore, Vanguard
City, and Excelsior), and each location has seven values representing
the cumulative (total) number of cases of the infection at that location
over seven subsequent days. For example, in Evermore, there was 1 case
found on the first day, and then no new cases for the next six days (so
the cumulative number of cases remained 1 throughout all the days). On
the other hand, in Vanguard City, on the first day one new case was
detected and, on each subsequent day (for the next six days), one new
case was detected each day. As a result, the cumulative number of cases
increases by one each day. You can assume that the location names in the
file are all unique. In other words, you'll never get two lines that
have the same location name at the beginning.</p>

<h3 id="sandcastle-part-a-reading-the-file">Sandcastle Part A: Reading the file</h3>

<p>For the first part of this problem, your task is to write the following
function:</p>

<p><code class="language-python highlighter-rouge"><span class="k">def</span> <span class="nf">load_data</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></code></p>

<p>The function takes in the name of a datafile (string), which has the
format for a data file described above. The function should return a
dictionary in which the keys are the names of locations in the data
file, and the value associated with each key is a list of the (integer)
values presenting the cumulative number of infections at that location.
For example, if you were passed the filename <code class="language-python highlighter-rouge"><span class="s">'disease1.txt'</span></code> (which is
the file shown previously), your function should return the following
dictionary:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s">'Evermore'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> 
    <span class="s">'Vanguard City'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> 
    <span class="s">'Excelsior'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note that the function <code class="language-python highlighter-rouge"><span class="n">strip</span><span class="p">()</span></code> applied to a string is useful both for
removing the "newline" character (<code class="language-python highlighter-rouge">\<span class="n">n</span></code>) at the end of a line in a file
as well as removing extra spaces at the start/end of a string. So, if we
had the string:<br>
<code class="language-python highlighter-rouge"><span class="n">s1</span> <span class="o">=</span> <span class="s">' example of stripping spaces '</span></code><br>
and we called:<br>
<code class="language-python highlighter-rouge"><span class="n">s2</span> <span class="o">=</span> <span class="n">s1</span><span class="p">.</span><span class="n">strip</span><span class="p">()</span> </code><br>
then <code class="language-python highlighter-rouge"><span class="n">s2</span></code> would have the value <code class="language-python highlighter-rouge"><span class="s">'example of stripping spaces'</span></code> (without
the spaces at the start/end of the string). A doctest is provided for
you to test your function. Feel free to write additional doctests. Also,
feel free to write any additional functions that may help you solve this
problem. We provide two sample files (<code class="language-python highlighter-rouge"><span class="s">'data/disease1.txt'</span></code> and
<code class="language-python highlighter-rouge"><span class="s">'data/disease2.txt'</span></code>) to help you test your code (please note that
since these files all live in the <code class="language-python highlighter-rouge"><span class="n">data</span></code> folder, you must specify their
names as <code class="language-python highlighter-rouge"><span class="n">data</span><span class="o">/</span><span class="nb">file</span><span class="o">-</span><span class="n">name</span><span class="p">.</span><span class="n">txt</span></code>).</p>

<h3 id="sandcastle-part-b-calculating-the-number-of-infections-per-day">Sandcastle Part B: Calculating the number of infections per day</h3>

<p>Once you have the load_data function working, the second part of this
problem requires that you write the following function:</p>

<p><code class="language-python highlighter-rouge"><span class="k">def</span> <span class="nf">daily_cases</span><span class="p">(</span><span class="n">cumulative</span><span class="p">)</span></code></p>

<p>The function takes in a dictionary of the type produced by the
<code class="language-python highlighter-rouge"><span class="n">load_data</span></code> function (i.e., keys are locations and values are lists of
seven values representing <em>cumulative</em> infection numbers).
The function should return a new dictionary in which the keys are the
same locations as in the dictionary passed in, but the value associated
with each key is a list of the seven values (integers) presenting the
number of <em>new infections each day</em> at that location. So,
given the dictionary shown above (produced from the file
<code class="language-python highlighter-rouge"><span class="s">'disease1.txt'</span></code>), your function should return the dictionary shown
below.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s">'Evermore'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="s">'Vanguard City'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="s">'Excelsior'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note that Evermore, for example, had 1 case the first day, but then no
additional <em>new</em> cases on any subsequent days. Vanguard
City, on the other hand, had one new case every day.</p>

<p>Hint: For every day, except the first, you can determine the number of
new cases by subtracting the cumulative number of cases <em>on the day
before</em> from the cumulative number of cases on that day.</p>

<p>Doctests are provided for you to test your function. Feel free to write
additional doctests. Also, feel free to write any additional functions
that may help you solve this problem. A <code class="language-python highlighter-rouge"><span class="n">main</span></code> function is also
provided, which calls your functions and prints the results.</p>

<h2 id="main-program-analyzing-data-bias">Main Program: Analyzing Data Bias</h2>

<h3 id="introduction">Introduction</h3>

<p>In this assignment, you will use your nested data structure and graphics
skills to build your very own data visualization application. You will
analyze a historical dataset consisting of nearly 20 years of reviews of
college and university professors posted on RateMyProfessors.com, a
popular review aggregation website. Teacher ratings are a common and
impactful facet of life in university ‚Äì here at Stanford, we fill out
course reviews at the end of every quarter. Future students use the
results of these reviews to help them choose their classes and plan
their academic futures. However, teaching evaluations are not an
objective source of truth about the quality of a professor's teaching.
Recent research has shown that <a href="https://www.insidehighered.com/news/2019/05/20/fighting-gender-bias-student-evaluations-teaching-and-tenures-effect-instruction">teaching evaluations often demonstrate
harmful biases, including gender
bias</a>.
The bias in teaching evaluations is a problem because the scores are
often used in decisions about who to hire, fire, tenure, and promote.
<strong>Your goal is to build a piece of software that helps you investigate
and reason about how humans use language in gendered (and potentially
biased) ways.</strong> Here are two screen shots of the program you will build:</p>

<p>first when exploring the word "class"<br>
<img src="./CS106A Handout 14 - Assignment 6_files/14image1.png" alt="Two examples of the completed BiasBars program showing word freuency
plots for two different words. The plot on the left shows frequencies
for the word &#39;class&#39; and the plot on the right shows frequencies for
the word &#39;funny&#39;. The vertical bars are mostly even for men and women
in the plot on the left but are prominently skewed towards higher values
for men in the plot on the
right."></p>

<p>Second when exploring the word "funny"<br>
<img src="./CS106A Handout 14 - Assignment 6_files/14image2.png" alt="Two examples of the completed BiasBars program showing word freuency
plots for two different words. The plot on the left shows frequencies
for the word &#39;class&#39; and the plot on the right shows frequencies for
the word &#39;funny&#39;. The vertical bars are mostly even for men and women
in the plot on the left but are prominently skewed towards higher values
for men in the plot on the
right."></p>

<p>Before we get started coding, we first want to provide you with some
background about why being able to investigate and identify biases in
datasets is such an important problem to solve. Much of today's work in
artificial intelligence involves natural language processing, a field
which studies the way language is used today and has been used in the
past. The datasets we use to train artificially intelligent systems are
usually collections of text that humans have written at some point in
the past. If there are imbalances in how different groups of people tend
to be described or represented in these datasets, then our machines will
pick up on and potentially amplify those imbalances. Extreme
manifestations of these biases like Tay, Microsoft's 2016 chatbot
infamous for tweeting racist and anti-Semitic statements after just a
day of learning from anonymous posts on the Internet, magnify the
importance of understanding the ways we use language. More recent
examples include Amazon's AI tool for expediting hiring and recruiting,
<a href="https://www.reuters.com/article/us-amazon-com-jobs-automation-insight/amazon-scraps-secret-ai-recruiting-tool-that-showed-bias-against-women-idUSKCN1MK08G">which was shut down after demonstrating extreme negative bias towards
hiring candidates based on their
gender</a>.</p>

<p>Even when people do not mean to be malicious, their language can still
exhibit biases that influence how our machines learn. For example, when
history of science professor Londa Schiebinger attempted to Google
Translate a Spanish article written about her, all of the pronouns
became "he" and "him" rather than "she" and "her" simply because
masculine pronouns were more common than feminine pronouns in the
available data. In a later study, Schiebinger found more insidious
translation errors that assumed genders for people of certain
professions, <a href="https://genderedinnovations.stanford.edu/case-studies/nlp.html">based on the frequency of word usage in gendered languages
such as
German</a>.
The software engineers who made Google Translate probably did not mean
for this to occur; <em>they probably did not even account for that
possibility as they were designing their translation algorithm</em>. <strong>The
moral of the story? To prevent these kinds of slip-ups, computer
scientists need to consider the social impacts of their work at the
beginning of their design process.</strong></p>

<p>Identifying issues of bias and representation in datasets is a natural
extension of many of the interesting ethical topics that we have talked
about in CS106A so far this quarter. As we've mentioned before, our
hope is that by introducing these sorts of topics early in computer
science education, we can help the next generation of software
developers and computer science researchers‚Äîwhich could include
you!‚Äîbe more mindful of the potential social implications of their
work.</p>

<h3 id="assignment-overview">Assignment Overview</h3>

<p>The rest of this handout will be broken into several sections. Each
section defines a distinct, manageable milestone that will allow you to
use the power of decomposition to build a complex final program out of
many small, testable components.</p>

<ol>
  <li><strong>Understand the dataset (overview and data
processing):</strong> Learn more about the dataset that you
will be exploring and the format that it is provided to you in by
calculating some baseline statistics on the dataset.</li>
  <li><strong>Add data about a single word (data processing):</strong>
Write a function for adding information about a single observed word
in a review to a provided dictionary.</li>
  <li><strong>Processing a whole file (data processing):</strong> Write a
function for processing an entire data file of reviews and storing
that data in a dictionary.</li>
  <li><strong>Enabling search (data processing):</strong> Write a
function to enable search through all words in the dataset.</li>
  <li><strong>Run the provided graphics code (connecting the data to the
graphics):</strong> Run the provided graphics code to ensure
it interacts properly with your data processing code.</li>
  <li><strong>Draw the background plot information (data
visualization):</strong> Write a function that draws an
initial plot area where the word frequency data will be displayed,
and associated labels.</li>
  <li><strong>Plot the word frequency data (data visualization):</strong>
Write a function for plotting the data for an inputted word.</li>
  <li><strong>Investigate bias in the dataset (ethics):</strong> Using
your functional BiasBars application, explore the dataset to
identify possible instances of biased/gendered use of language.</li>
</ol>

<p>The work in this assignment is divided across two files:
<code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">py</span></code> for data processing and <code class="language-python highlighter-rouge"><span class="n">biasbars</span><span class="p">.</span><span class="n">py</span></code> for data
visualization. In <code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">py</span></code>, you will write the code to build
and populate the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary for storing our data. In
<code class="language-python highlighter-rouge"><span class="n">biasbars</span><span class="p">.</span><span class="n">py</span></code>, you will write code to use the <code class="language-python highlighter-rouge"><span class="n">tkinter</span></code> graphics library
to build a powerful visualization of the data contained in <code class="language-python highlighter-rouge"><span class="n">word_data</span></code>.
We've divided the assignment this way so that you can get started on the
data processing milestones (<code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">py</span></code>) before worrying about
graphics.</p>

<p><strong>AN IMPORTANT NOTE ON TESTING:</strong><br>
The starter code provides empty function definitions for all of the
specified milestones. For each problem, we give you specific guidelines
on how to begin decomposing your solution. While you can add additional
functions for decomposition, <strong>you should not change any of the function
names or parameter requirements that we already provide to you in the
starter code.</strong> Since we include doctests or other forms of testing for
these pre-decomposed functions, editing the function headers can cause
existing tests to fail. Additionally, we will be expecting the exact
function definitions we have provided when we grade your code. Making
any changes to these definitions will make it very difficult for us to
grade your submission. Of course, we encourage you to write additional
doctests for the functions in this assignment.</p>

<p><strong>IMPLEMENTATION TIP:</strong><br>
<strong>We highly recommend reading over all of the parts of this assignment
first to get a sense of what you're being asked to do before you start
coding.</strong> It's much harder to write the program if you just implement
each separate milestone without understanding how it fits into the
larger picture (e.g. It's difficult to understand why milestone 2 is
asking you to add a word to a dictionary without understanding what the
dictionary will be used for or where the data will come from).</p>

<h3 id="milestone-1-understanding-the-dataset-by-calculating-summary-statistics">Milestone 1: Understanding the dataset by calculating summary statistics</h3>

<p><strong>In this milestone you are going to write a program in the file
<code class="language-python highlighter-rouge"><span class="n">rating_stats</span><span class="p">.</span><span class="n">py</span></code> which will load the assignment data and calculate two
numbers which summarize overall trends in the data.</strong></p>

<p>This assignment uses real world data from RateMyProfessors.com, an
online platform that enables students to leave anonymous, public reviews
about their college/university professors. A typical review on
RateMyProfessors.com consists of an overall numerical rating of quality
(from 1-5), a number of qualitative tags (like "amazing lectures" or
"difficult exams"), and a free-response comment section where students
can write a short paragraph describing their experience with the
professor. An example review for our very own Mehran Sahami is shown
below (we love Mehran!):</p>

<p><img src="./CS106A Handout 14 - Assignment 6_files/14figure2.png" alt="A sample review from RateMyProfessors.com for Mehran Sahami. The text
of the review says &#39;Mehran Sahami, what Stanford is all about, great
teaching, new ideas, helping you ask big questions and build awesome
stuff.&#39; The numerical quality rating is a
5.0"></p>

<p><strong>Figure 2.</strong> Example review from
RateMyProfessors.com for Mehran Sahami</p>

<p>The power of the Internet makes this platform for reviews accessible to
the global community of students, empowering students to make decisions
about classes they might want to take or universities they might want to
attend based on the quality of instruction. The indirectness and
anonymity of being behind a computer or phone screen also gives people a
sense of security to say whatever they want, which can range from the
supportive or constructive to the downright offensive or harmful. In
analyzing this dataset you will be working to answer the following
question: <strong><em>does a professor's gender influence the language people
use to describe them?</em></strong></p>

<p>To examine this question, we have collected and compiled a dataset of
20,000 reviews from RateMyProfessors.com posted over a 17-year span from
2001 to 2018. We have cleaned and organized the data into one large text
file that will act as the source of information for the program you will
write. There are 3 important components of every review that we have
used to build the dataset: gender of the professor being reviewed,
textual content of the free-response comment, and overall review quality
(a numerical score from 1-5).</p>

<p>Like many datasets that you will encounter in real life, the data is
stored in a text file. Here is an example of what the data looks like:</p>

<p><code class="language-python highlighter-rouge"><span class="n">data</span><span class="o">/</span><span class="n">small</span><span class="o">-</span><span class="n">handout</span><span class="p">.</span><span class="n">txt</span></code></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Rating,Professor Gender,Comment Text
5.0,M,mehran sahami is what stanford is all about
4.5,W,she is a great professor and is very knowledgeable
1.0,M,terrible aim his candy throwing needs to improve
</span></code></pre></div></div>

<p><img src="./CS106A Handout 14 - Assignment 6_files/14figure3.png" alt="">
<strong>Figure 3.</strong> File format for professor review data from
RateMyProfessors.com</p>

<p><br>
The files are included in the data folder of the project's starter code
(please note that since these files all live in the <code class="language-python highlighter-rouge"><span class="n">data</span></code> folder, you
must specify their names as <code class="language-python highlighter-rouge"><span class="n">data</span><span class="o">/</span><span class="nb">file</span><span class="o">-</span><span class="n">name</span><span class="p">.</span><span class="n">txt</span></code>). You should note the
following about the structure of each file:</p>

<ul>
  <li>The first line of the file specifies the data format (to make the
data files more human readable) and should be ignored when
processing the actual data.</li>
  <li>All remaining lines in the file consist of three comma-separated
values, as follows:
    <ul>
      <li>The first value is the <strong>numerical rating</strong> of the review on a
scale from 1.0 to 5.0, where 5.0 is the best review possible.
Note that these ratings are represented as floating point
numbers.</li>
      <li>The second value is the <strong>gender</strong> of the professor being
reviewed, either M for Man or W for Woman.</li>
      <li>The third value in the line is the <strong>textual comment</strong>
associated with the reviews. This comment consists of
space-separated tokens that have been cleaned -- made all
lowercase and stripped of punctuation.</li>
    </ul>
  </li>
</ul>

<p><strong>A note on gender vs sex</strong>:<br>
In this dataset, gender is the only piece of information we have about
these people's social identities; the dataset does not include other
salient identities such as race and ability. Furthermore, gender is only
classified into the categories of woman and man, which means non-binary
people are unfortunately not represented. We choose to describe the two
genders included in this dataset as "woman" and "man" rather than
"female" and "male," as the former terms refer to gender and social role
whereas the latter typically refer to sex assigned at birth. Professors
do not have the opportunity to describe their own gender identity; this
data represents the guesses of students. <strong>We will reflect further on
this point in the ethics questions at the end of the assignment.</strong></p>

<p>Your first task is to write a program in the file <code class="language-python highlighter-rouge"><span class="n">rating_stats</span><span class="p">.</span><span class="n">py</span></code>
which loads the file <code class="language-python highlighter-rouge"><span class="s">"data/full-data.txt"</span></code> and, using all the data in
that file, calculates and prints two numbers:</p>

<ol>
  <li>The percent of reviews for women which are rated high (the rating is
greater than 3.5)</li>
  <li>The percent of reviews for men which are rated high (the rating is
greater than 3.5)</li>
</ol>

<p>When you run your program it should look like this:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>py rating_stats.py 
<span class="go">Which data file would you like to load? data/full-data.txt
57% of reviews for women in the dataset are high.
58% of reviews for men in the dataset are high.
</span></code></pre></div></div>

<p>Recall that to calculate a percentage of reviews which are high for a
given gender you should divide the count of the number of reviews which
are both for that gender <strong><em>and</em></strong> high by the count of the number of
reviews for that gender. Then, to turn this decimal into a percent,
first multiply by 100 and then convert to an integer using the <code class="language-python highlighter-rouge"><span class="nb">round</span><span class="p">()</span></code>
function. The <code class="language-python highlighter-rouge"><span class="nb">round</span><span class="p">()</span></code> function is a handy Python function that will
round a floating point value to the nearest integer, allowing us to
produce the nice output format we want.</p>

<p>Without getting into the math too deeply we note that given the amount
of data we have access to, any number you calculate is likely to deviate
by 1 to 2 percentage points.</p>

<p>Note that the user has specified the path to the data file including the
directory <code class="language-python highlighter-rouge"><span class="n">data</span></code>, since the file <code class="language-python highlighter-rouge"><span class="n">full</span><span class="o">-</span><span class="n">data</span><span class="p">.</span><span class="n">txt</span></code> is in the <code class="language-python highlighter-rouge"><span class="n">data</span></code>
subdirectory of the project folder.</p>

<p>Also note that you can use the <code class="language-python highlighter-rouge"><span class="nb">next</span><span class="p">()</span></code> function of a file object (as in
<code class="language-python highlighter-rouge"><span class="nb">next</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span></code> if you just want to read a single line from a file. This
might be helpful to read the first (header) line of the file before then
going into a loop to read all the lines of actual data in the file.</p>

<h3 id="milestone-2-building-the-word_data-variable-needed-for-our-data-visualization">Milestone 2: Building the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> variable needed for our data visualization</h3>

<p><strong>In this milestone you are going to program two functions necessary to
build the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> data structure: <code class="language-python highlighter-rouge"><span class="n">add_data_for_word</span></code> and
<code class="language-python highlighter-rouge"><span class="n">convert_rating_to_index</span></code>. Both functions are in <code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">py</span></code>.</strong></p>

<p>Data in the real world is rarely in the form you need it to be. In this
case, we want to make a data visualization of bias bars, but we only
have data in a text file broken down by individual reviews. There's a
problem with this; the interesting analysis and visualization of the
data described above requires organizing our data by word. This is a
realistic data problem, and it will be the main challenge for this
project. Our goal in the first three milestones will be to build an
overall <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary that contains the <code class="language-python highlighter-rouge"><span class="n">sums</span></code> of individual
frequencies for a given word across many years, broken down by gender
and rating quality.</p>

<h4 id="effectively-structuring-data">Effectively structuring data</h4>

<p>In order to help you with the challenge of structuring and organizing
the word count data that must be calculated across many different
individual reviews, we will define a nested data structure as well as
some key assumptions regarding how we interpret the data.</p>

<p>To begin with, we need to consider the issue of being able to organize
the data by the numerical rating associated with the review, since we
want to be able to identify trends in how a given word is used in
positive reviews vs. negative reviews. Since numerical rating is a float
(real value) that can take on many different values between 1.0 and 5.0,
we are going to make our data processing task simpler by representing
review quality using only three "buckets":</p>

<ul>
  <li>Reviews with a numerical rating of <strong>less than 2.5</strong> will be
considered "low reviews".</li>
  <li>Reviews with a numerical rating <strong>between 2.5 and 3.5 (inclusive on
both ends of range)</strong> will be considered "medium reviews"</li>
  <li>Reviews with a numerical rating <strong>above 3.5</strong> will be considered
"high reviews"</li>
</ul>

<p>With this knowledge, let's think about how we can build a data
structure that organizes word frequencies (counts) across both gender
and review quality. The data structure for this program (which we will
refer to as <code class="language-python highlighter-rouge"><span class="n">word_data</span></code>) is a dictionary that has a key for every word
(a string) that we come across in the dataset. The value associated with
each word is another (nested) dictionary, which maps gender to a list of
word counts, broken down by rating quality (the ordering is counts for
low reviews, then medium reviews, then high reviews). A partial example
of this data structure would look something like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">{</span>
            <span class="s">'great'</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">'W'</span><span class="p">:</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">800</span><span class="p">],</span>
                <span class="s">'M'</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">1500</span><span class="p">]</span>
            <span class="p">},</span>
            <span class="s">'teacher'</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">'W'</span><span class="p">:</span> <span class="p">[</span><span class="mi">330</span><span class="p">,</span> <span class="mi">170</span><span class="p">,</span> <span class="mi">852</span><span class="p">],</span>
                <span class="s">'M'</span><span class="p">:</span> <span class="p">[</span><span class="mi">402</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">1194</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>As mentioned previously, each word has an inner dictionary storing
information about frequencies aggregated by gender. We have provided you
with helpful constants <code class="language-python highlighter-rouge"><span class="n">KEY_WOMEN</span> <span class="p">(</span><span class="s">"W"</span><span class="p">)</span></code> and <code class="language-python highlighter-rouge"><span class="n">KEY_MEN</span> <span class="p">(</span><span class="s">"M"</span><span class="p">)</span></code> that
represent the key values of the inner nested dictionary.</p>

<p>Let's break down the organization of this data structure a little bit
with an example. Let's say we wanted to access the current count of
occurrences of the word "great" in high reviews for women (which we
can see to be 800 from the above diagram) . What steps could we take in
our code to traverse the nested data structure to access that value?</p>

<ul>
  <li>
    <p>First, we must access the overall <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary to get the
data associated with the word "great" using the expression
<code class="language-python highlighter-rouge"><span class="n">word_data</span><span class="p">[</span><span class="s">"great"</span><span class="p">]</span></code>. This gives us an inner dictionary that looks
like this</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="s">'W'</span><span class="p">:</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">800</span><span class="p">],</span>
  <span class="s">'M'</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">1500</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Now, we must access the list of word counts associated with our
gender of interest. To do that, we can use another level of
dictionary access, now specifying the dictionary key for women, with
the expression <code class="language-python highlighter-rouge"><span class="n">word_data</span><span class="p">[</span><span class="s">"great"</span><span class="p">][</span><span class="s">"W"</span><span class="p">]</span></code>. This expression gives us
the following list</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">800</span><span class="p">]</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Finally, we're one step away from our end goal. The last step is to
index into the innermost list to get the word count associated with
the specific review bucket we want to analyze. We know that high
reviews fall in the last bucket of our list (index 2), so we access
our overall desired count with the expression
<code class="language-python highlighter-rouge"><span class="n">word_data</span><span class="p">[</span><span class="s">"great"</span><span class="p">][</span><span class="s">"W"</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span></code> which finally gives us the desired
count of <code class="language-python highlighter-rouge"><span class="mi">800</span></code>.</p>
  </li>
</ul>

<p>As a debugging tool, we've provided a helpful <code class="language-python highlighter-rouge"><span class="n">print_words</span><span class="p">()</span></code> function
that takes in a <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary of exactly this format and prints
out its contents, with the data displayed in alphabetical order by word.
We handle all of the printing of <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> for you so you are not
required to sort the keys in the outer dictionary alphabetically. But if
you're interested in seeing how it works, feel free to check out the
provided function!</p>

<p>The subsequent milestones and functions will allow us to build,
populate, and display our nested dictionary data structure, which we
will refer to as <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> throughout the handout. They are broken
down into two main parts: data processing in <code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">py</span></code>
(milestones 2-4) and data visualization in <code class="language-python highlighter-rouge"><span class="n">biasbars</span><span class="p">.</span><span class="n">py</span></code> (milestones
5-7).</p>

<p>The <code class="language-python highlighter-rouge"><span class="n">add_data_for_word</span><span class="p">()</span></code> function takes in the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary,
a single word, a gender label, and a numerical rating for the review in
which this word was observed. The function then stores this information
in the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dict. Eventually, we will call this function many
times to build up the whole data set, but for now we will focus on just
being able to add a single entry to our dictionary, as demonstrated in
different stages in Figure 4. This function is short but dense.</p>

<p><img src="./CS106A Handout 14 - Assignment 6_files/14figure41.png" alt=""><br>
<img src="./CS106A Handout 14 - Assignment 6_files/14figure42.png" alt=""><br>
<strong>Figure 4.</strong> The dictionary on the left side of the arrow represents
the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dict passed into the <code class="language-python highlighter-rouge"><span class="n">add_data_for_word</span><span class="p">()</span></code> function. The
dictionary on the right side of the arrow represents the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code>
dictionary after a call to the function has been made with the specified
parameters. The result of three separate function calls are diagrammed
here.</p>

<p>Note that since dictionaries in Python are mutable, when we modify the
<code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary inside our function, those changes will persist
even after the function finishes. Therefore, we do not need to return
the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary at the end of <code class="language-python highlighter-rouge"><span class="n">add_data_for_word</span><span class="p">()</span></code>.</p>

<p>Here's three important things you should take into consideration when
implementing this function:</p>

<ul>
  <li>
    <p>When you first encounter a word that doesn't yet exist in the
dictionary, you should insert a "default value" inner dictionary
into the list. This dictionary should have keys for both women and
men present and inner list values for both that are length-3 lists
with the values all set to 0. An example declaration of the inner
dict you might insert would look as follows:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">default_dict</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="n">KEY_WOMEN</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                  <span class="n">KEY_MEN</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
               <span class="p">}</span>
</code></pre></div>    </div>

    <p>Why is insertion of this default dictionary important when you
encounter a word that doesn't yet exist at the outer level of the
<code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary? Well, once you know there is such a
structure available for your word of interest, then <strong><em>you can
safely index into the nested structure at each level (word, gender,
and rating index)</em></strong>.</p>
  </li>
  <li>
    <p>When you encounter a word that already exists in the dictionary, you
should increment the existing count associated with the provided
word, gender, and rating, therefore building up a cumulative total
of word count data over time! Hint: Go back to the example in the
"Effectively structuring data" section. How can we access internal
counts in the nested data structure in Python code?</p>
  </li>
  <li>
    <p>We've provided a skeleton of a helper function called
<code class="language-python highlighter-rouge"><span class="n">convert_rating_to_index</span><span class="p">()</span></code> that we strongly recommend implementing
(there's even associated doctests provided!). The goal of this
function is to take the numerical review provided to the function
and translate that rating into a "bucket" index, which will help
you figure out which internal list entry to increment. Remember, we
have three buckets (low rating, medium rating, and high ratings) and
the conversion rules are as follows:</p>
    <ul>
      <li>Rating that are <strong>less than 2.5</strong> fall in the low bucket (index
0)</li>
      <li>Ratings that are <strong>between 2.5 and 3.5 (inclusive)</strong> fall in the
medium bucket (index 1)</li>
      <li>Ratings that are <strong>greater than 3.5</strong> fall in the high bucket
(index 2)</li>
    </ul>
  </li>
</ul>

<h4 id="testing-milestone-2">Testing Milestone 2</h4>

<p>The starter code includes a couple of doctests to help you test your
code. The tests pass in an empty dictionary to represent an empty
<code class="language-python highlighter-rouge"><span class="n">word_data</span></code> structure. You will want to consider writing additional
doctests for <code class="language-python highlighter-rouge"><span class="n">add_data_for_word</span><span class="p">()</span></code> to help you make sure this function
is working correctly before moving on. Take a look at how the existing
doctests are formatted. As we mentioned in class, writing doctests is
just like running each line of code in the Python Console. Therefore,
you will first need to create a dictionary on one doctest line before
passing it into your function. As you can see in the existing doctests
for this function, we start with an empty dictionary, then call the
<code class="language-python highlighter-rouge"><span class="n">add_data_for_word</span><span class="p">()</span></code> function (with appropriate parameters) to add
entries to the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary. Then, we put <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> on the
final doctest line, followed by the expected contents in order to
evaluate your function. We have modeled this 3-step process for you in
the doctests that we have provided to encourage you to create additional
doctests. You do not necessarily need to create a new dictionary for
every doctest you might add. If you do add additional doctests, make
sure to match the spacing and formatting for dictionaries (as in the
examples we have provided), including a single space after each colon
and each comma. The keys should be written in the order they were
inserted into the dict ‚Äì this means that when you declare the "empty"
inner dictionary described above, <strong>you should always specify the key
for women first and the key for men second, otherwise the provided
doctests won't pass.</strong></p>

<h3 id="milestone-3-processing-a-whole-file-of-review-data">Milestone 3: Processing a whole file of review data</h3>

<p><strong>In this milestone you are going to program the workhorse function
necessary to build the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> variable: <code class="language-python highlighter-rouge"><span class="n">read_file</span></code>.This function
is in <code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">py</span></code></strong></p>

<p>Now that we can add a single entry to our data structure, we will focus
on being able to build a whole file's worth of professor reviews. Fill
in the <code class="language-python highlighter-rouge"><span class="n">read_file</span><span class="p">()</span></code> function, which takes in a filename and returns a
<code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dict storing all of the word count data from that file. You
should add the contents of the file, one line at a time, leveraging the
<code class="language-python highlighter-rouge"><span class="n">add_data_for_word</span><span class="p">()</span></code> function we wrote in the previous milestone. The
format of a text file containing professor review data is shown in
Figure 3 and is described in detail in the "Dataset Overview" overview
section. Here is a short summary of the important details:</p>

<ul>
  <li>The first line of every file contains a set of strings describing
the format of the data structure. <strong>Make sure to ignore this line
when processing the contents of the file.</strong></li>
  <li>Each line represents a single review and is composed of three
comma-separated values. The first value is a numerical rating, the
second value is a string describing the professor's gender, and the
third value is a string representing the textual comment left as
part of the review. Hint: the <code class="language-python highlighter-rouge"><span class="n">split</span><span class="p">()</span></code> function will be useful
here.</li>
  <li>The textual comment consists of many word tokens, each separated by
spaces. Hint: the <code class="language-python highlighter-rouge"><span class="n">split</span><span class="p">()</span></code> operation will be useful here as well!
After splitting the comment into words, you should be able to make
use of the <code class="language-python highlighter-rouge"><span class="n">add_data_for_word</span><span class="p">()</span></code> function you implemented in
Milestone 2.</li>
</ul>

<p>You should process all the lines in the file. Do not make any
assumptions about the number of lines of data contained in the file.
<strong>Make sure you return the constructed <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary at the end
of the function.</strong> Tests are provided for this function, using the
relatively small test files <code class="language-python highlighter-rouge"><span class="n">small</span><span class="o">-</span><span class="n">one</span><span class="p">.</span><span class="n">txt</span></code>, <code class="language-python highlighter-rouge"><span class="n">small</span><span class="o">-</span><span class="n">two</span><span class="p">.</span><span class="n">txt</span></code>, and
<code class="language-python highlighter-rouge"><span class="n">small</span><span class="o">-</span><span class="n">three</span><span class="p">.</span><span class="n">txt</span></code> to build a rudimentary <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary.</p>

<h3 id="milestone-4-searching-for-words-in-the-dataset">Milestone 4: Searching for words in the dataset</h3>

<p><strong>In this milestone you are going to implement <code class="language-python highlighter-rouge"><span class="n">search_words</span><span class="p">()</span></code>, a neat
little function to help sort through all the data stored in the
<code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dict. This function is in <code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">py</span></code></strong></p>

<p>Now that we have a data structure that stores lots of word count data,
organized by word, it might be good to be able to search through all the
words in our dataset and return all those that we might potentially be
interested in. You should write the <code class="language-python highlighter-rouge"><span class="n">search_words</span><span class="p">()</span></code> function, which is
given a <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary and a target string, and returns a list
of all words from our dataset that contain the target string. <strong>This
search should be case insensitive</strong>, which means that the target strings
<code class="language-python highlighter-rouge"><span class="s">'le'</span></code> and <code class="language-python highlighter-rouge"><span class="s">'LE'</span></code> both match the word 'lecture'. Note that the words
that contain the target string anywhere in them (not just at the
beginning) should also be returned by this function. So the word
<code class="language-python highlighter-rouge"><span class="s">'middle'</span></code> will also match the target string <code class="language-python highlighter-rouge"><span class="s">'le'</span></code>.</p>

<h4 id="testing-milestones-2-4">Testing Milestones 2-4</h4>

<p>You've made it halfway! It's now time to test all the functions you've
written above with some real data and then move on to crafting a display
for the data. We have provided a <code class="language-python highlighter-rouge"><span class="n">main</span><span class="p">()</span></code> function in <code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">py</span></code>
for you to be able to test that all of the functions we've written so
far are working properly. Perhaps more importantly, you'll be able to
flex your new data organization skills on the large dataset over 20,000
real reviews from RateMyProfessor.com! The given <code class="language-python highlighter-rouge"><span class="n">main</span><span class="p">()</span></code> function we
have provided can be run in two different ways. The first way that your
program can be run is by providing a single data file argument, which
will be passed into the <code class="language-python highlighter-rouge"><span class="n">read_file</span><span class="p">()</span></code> function you have written. This
data is then printed to the console by the <code class="language-python highlighter-rouge"><span class="n">print_words</span><span class="p">()</span></code> function we
have provided, which prints the words in alphabetical order, along with
their associated word count data. A sample output can be seen below,
when running the <code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">py</span></code> program on the <code class="language-python highlighter-rouge"><span class="n">small</span><span class="o">-</span><span class="n">three</span><span class="p">.</span><span class="n">txt</span></code>
file. This file is just for testing purposes and doesn't actually
contain any real data. (Note: if you're using a Mac, you would use
"python3" rather than "py" in the examples below.)</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>py biasbarsdata.py data/small-three.txt 
<span class="go">average M [1, 3, 0] W [0, 0, 0] 
best M [1, 0, 0] W [0, 0, 3] 
not M [2, 0, 0] W [0, 0, 0]
</span></code></pre></div></div>

<p>The small files test that the code is working correctly, but they're
just an appetizer to the main course, which is running your code on the
file containing the real reviews! You can take a look at almost 20 years
of data with the following command in the terminal (pro tip: you can use
the Tab key to complete file names).</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>py biasbarsdata.py data/full-data.txt
<span class="go">‚Ä¶ lots of output ‚Ä¶ 
</span></code></pre></div></div>

<p>Organizing all the data and dumping it out is impressive, but it's not
the only thing we can do! The <code class="language-python highlighter-rouge"><span class="n">main</span><span class="p">()</span></code> function that we have provided
can also call the <code class="language-python highlighter-rouge"><span class="n">search_words</span><span class="p">()</span></code> function we have written to help us
filter the large amounts of data we are now able to read and store. If
the first 2 command line arguments are <code class="language-python highlighter-rouge"><span class="s">"-search target"</span></code>, then <code class="language-python highlighter-rouge"><span class="n">main</span><span class="p">()</span></code>
reads in all the data from the specified file, calls your
<code class="language-python highlighter-rouge"><span class="n">search_words</span><span class="p">()</span></code> function to find words that have matches with the
target string, and prints those words. Since the <code class="language-python highlighter-rouge"><span class="n">main</span><span class="p">()</span></code> function
directly prints the output of the <code class="language-python highlighter-rouge"><span class="n">search_words</span><span class="p">()</span></code> function, note that
the words are not printed in alphabetical order, but rather in the order
in which they were added to the dictionary. Here is an example with the
search target <code class="language-python highlighter-rouge"><span class="s">"pand"</span></code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>py biasbarsdata.py <span class="nt">-search</span> pand data/full-data.txt 
<span class="go">expanded
expand
expanding
mind-expanding
pandered
expands
pandering
pander
</span></code></pre></div></div>

<p>You've now solved the key challenge of reading and organizing a
realistic mass of data! Now we can move on to building a cool
visualization for this data!</p>

<h3 id="milestone-5-running-the-provided-graphics-code">Milestone 5: Running the provided graphics code</h3>

<p><strong>In this milestone you are going to investigate the skeleton of the
provided graphics program we've given you and confirm it correctly ties
in with your code from the previous four milestones.There is no code to
write here but you will be running code from <code class="language-python highlighter-rouge"><span class="n">biasbars</span><span class="p">.</span><span class="n">py</span></code></strong></p>

<p>We have provided some starter code in the <code class="language-python highlighter-rouge"><span class="n">biasbars</span><span class="p">.</span><span class="n">py</span></code> file to set up a
drawing canvas (using <code class="language-python highlighter-rouge"><span class="n">tkinter</span></code>), and then add the interactive
capability to enter words to plot and target strings to search the words
in the database. The code we have provided is located across two files:
the tkinter code to draw the main graphical window and set up the
interactive capability is located in <code class="language-python highlighter-rouge"><span class="n">biasbarsgui</span><span class="p">.</span><span class="n">py</span></code> and the code that
actually makes everything run is located in the <code class="language-python highlighter-rouge"><span class="n">main</span><span class="p">()</span></code> function in
<code class="language-python highlighter-rouge"><span class="n">biasbars</span><span class="p">.</span><span class="n">py</span></code>. The provided <code class="language-python highlighter-rouge"><span class="n">main</span><span class="p">()</span></code> function takes care of calling your
<code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">read_file</span><span class="p">()</span></code> function to read in the data files full of
reviews and populate the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary. The challenge of this
part of the assignment is figuring out how to write functions to graph
the contents of the <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> dictionary. For this milestone, you
should run the program from the command line in the usual way (shown
below).</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="w"> </span>py biasbars.py
</code></pre></div></div>

<p><img src="./CS106A Handout 14 - Assignment 6_files/14figure5.png" alt="">
<strong>Figure 5.</strong> Blank Bias
Bars Graphical Window</p>

<p>Although this program might appear boring, it has actually loaded all of
the word count data information behind the scenes, and normalized the
word counts into frequencies (that is, all the counts for women have
been scaled by the total number of words in reviews about women, and
same for all the counts of men). To test this (and to test out the
<code class="language-python highlighter-rouge"><span class="n">search_words</span><span class="p">()</span></code>) function you wrote in Milestone 4, try typing a search
string into the text field at the bottom of the window and then hit
<code class="language-python highlighter-rouge"><span class="o">&lt;</span><span class="n">Enter</span><span class="o">&gt;</span> </code>. You should see a text field pop up in the bottom of the
screen showing all words in the data set that match the search string,
as seen in Figure 6.</p>

<p><img src="./CS106A Handout 14 - Assignment 6_files/14figure6.png" alt="Search results for substring search &#39;awes&#39; which shows results of
awesome, awesomest, awesomeness, awesom, awesomee, and
awesomely"></p>

<p><strong>Figure 6.</strong> Bottom
portion of the Bias Bars window after entering the search string
<code class="language-python highlighter-rouge"><span class="s">'awes'</span></code></p>

<p>Once you have tested that you can run the graphical window and search
for words, you have completed Milestone 5.</p>

<h3 id="milestone-6-drawing-the-fixed-background-content">Milestone 6: Drawing the fixed background content</h3>

<p><strong>In this milestone you are going to draw the rectangular plotting area
and review quality labels on the provided canvas.You will be
implementing the <code class="language-python highlighter-rouge"><span class="n">draw_fixed_content</span><span class="p">()</span></code> function in <code class="language-python highlighter-rouge"><span class="n">biasbars</span><span class="p">.</span><span class="n">py</span></code></strong></p>

<p>Here are the constants that you will use for Milestones 6 and 7:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">VERTICAL_MARGIN = 30
LEFT_MARGIN = 60
RIGHT_MARGIN = 30
LABELS = ["Low Reviews", "Medium Reviews", "High Reviews"]
LABEL_OFFSET = 10
BAR_WIDTH = 75
LINE_WIDTH = 2
TEXT_DX = 2
NUM_VERTICAL_DIVISIONS = 7
TICK_WIDTH = 15
</span></code></pre></div></div>

<p>In this milestone, our goal is to draw the fixed rectangle defining the
plot area and the three review quality labels along the x-axis of the
plot. To do so, you will implement the <code class="language-python highlighter-rouge"><span class="n">draw_fixed_content</span><span class="p">()</span></code> function.
We have provided three lines of code in this function that clear the
existing canvas and get the canvas width and height. Once this function
is done, your graphical window should look like Figure 7 (minus the red
highlighting and labeling).</p>

<p><img src="./CS106A Handout 14 - Assignment 6_files/14figure7.png" alt="Annotated image of fixed content drawn in BiasBars
window.">
<strong>Figure 7.</strong> This is the Bias Bars window
after <code class="language-python highlighter-rouge"><span class="n">draw_fixed_content</span><span class="p">()</span></code> has been called, with the canvas area
highlighted in red and relevant measurements annotated. <strong>Note:</strong> The
vertical dashed lines and red border are shown for explanatory reasons
and should not actually be drawn in the canvas!</p>

<p>Note: In the GUI (Graphical User Interface), the text field labeled
"Word to plot:" takes up the top of the window, and the canvas is a
big rectangle below it. The "Search:" text field is at the bottom of
the window below the canvas. When we refer to the canvas, we are talking
about the red highlighted area in Figure 7.</p>

<p>To complete this milestone, you should follow the following steps.</p>

<ul>
  <li>Draw a rectangle on the canvas whose four corners define an area
that is offset from the boundaries of the canvas by
<code class="language-python highlighter-rouge"><span class="n">VERTICAL_MARGIN</span></code> on the top and bottom, <code class="language-python highlighter-rouge"><span class="n">LEFT_MARGIN</span></code> on the left,
and <code class="language-python highlighter-rouge"><span class="n">RIGHT_MARGIN</span></code> on the right. Moving forward, we will define the
region delineated by this rectangle as the "plotting region". When
drawing this rectangle, you want the lines to appear thicker than
the default ‚Äì to accomplish this, include the optional
<code class="language-python highlighter-rouge"><span class="n">width</span><span class="o">=</span><span class="n">LINE_WIDTH</span></code> parameter in any calls to <code class="language-python highlighter-rouge"><span class="n">create_rectangle</span><span class="p">()</span></code></li>
  <li>For every label in <code class="language-python highlighter-rouge"><span class="n">LABELS</span></code>, display that label in its appropriate
position on the canvas. Here are the important things to keep in
mind when plotting the labels:
    <ul>
      <li>Imagine splitting the "plotting region" into three evenly
sized vertical regions. Each label is drawn in one of these
regions and should be centered in its region. Another way of
putting this is that the x coordinates of the labels should be
evenly spaced in the plotting region, as shown in Figure 7.</li>
      <li>The trickiest math here is computing the x value for each label.
For this reason, we ask you to decompose a short helper function
called <code class="language-python highlighter-rouge"><span class="n">get_centered_x_coordinate</span><span class="p">()</span></code>, which takes in the width
of the canvas and the index of the label you are drawing (where
"Low" has index 0, "Medium" has index 1, and so on) and
returns the appropriate x coordinate. You'll need to account for
the margins on the left and right when writing this function, as
the x coordinates should be evenly spaced across the plotting
region. Both <code class="language-python highlighter-rouge"><span class="n">draw_fixed_content</span><span class="p">()</span></code> and <code class="language-python highlighter-rouge"><span class="n">plot_word</span><span class="p">()</span></code> (written
in Milestone 7) need to have the exact same x coordinate for the
center of each region, which makes this a valuable function to
decompose. We have provided several doctests for the
<code class="language-python highlighter-rouge"><span class="n">get_centered_x_coordinate</span><span class="p">()</span> <span class="n">function</span><span class="p">.</span></code></li>
      <li>Each label should be drawn at a vertical offset of
<code class="language-python highlighter-rouge"><span class="n">LABEL_OFFSET</span></code> pixels from the bottom line of the plotting
region.</li>
      <li>The tkinter <code class="language-python highlighter-rouge"><span class="n">create_text</span><span class="p">()</span></code> function takes in an optional anchor
parameter that indicates which corner of the text should be
placed at the specified <code class="language-python highlighter-rouge"><span class="n">x</span><span class="p">,</span><span class="n">y</span></code> coordinate. When calling the
<code class="language-python highlighter-rouge"><span class="n">create_text</span><span class="p">()</span></code> function for these labels, you should specify
<code class="language-python highlighter-rouge"><span class="n">anchor</span><span class="o">=</span><span class="n">tkinter</span><span class="p">.</span><span class="n">N</span></code> as the last parameter to indicate that the
<code class="language-python highlighter-rouge"><span class="n">x</span><span class="p">,</span><span class="n">y</span></code> point is at the top-center edge of the text.</li>
    </ul>
  </li>
</ul>

<p>By default, <code class="language-python highlighter-rouge"><span class="n">main</span><span class="p">()</span></code> creates a window with a 1000 x 600 canvas in it.
Try changing the constant values <code class="language-python highlighter-rouge"><span class="n">WINDOW_WIDTH</span></code> and <code class="language-python highlighter-rouge"><span class="n">WINDOW_HEIGHT</span></code> that
are defined at the top of the program to change the size of the window
and canvas that are drawn. Your line-drawing math should still look
right for different width/height values. You should also be able to
temporarily change the margins constant to different values, and your
drawing should be able to use the new value. This shows the utility of
defining constants‚Äî they allow you to define values that can be easily
changed and all the lines that rely on this value remain consistent with
one another.</p>

<p>Once your code can draw the fixed rectangle and labels, for various
heights and widths, you can move on to the next milestone.</p>

<h3 id="milestone-7-plotting-the-word-frequency-data">Milestone 7: Plotting the word frequency data</h3>

<p><strong>In this milestone you are going to plot the word frequency data and
dynamic y-axis labels that help to interpret the data in <code class="language-python highlighter-rouge"><span class="n">word_data</span></code>.You
will be implementing the <code class="language-python highlighter-rouge"><span class="n">plot_word</span><span class="p">()</span></code> function in <code class="language-python highlighter-rouge"><span class="n">biasbars</span><span class="p">.</span><span class="n">py</span></code></strong></p>

<p>We have reached the final part of the assignment! Now it is time to plot
the actual word frequency data that we have worked so hard to organize.
To do so, you will fill in the <code class="language-python highlighter-rouge"><span class="n">plot_word</span><span class="p">()</span></code> function. We have provided
some lines of code for you already, which use your
<code class="language-python highlighter-rouge"><span class="n">draw_fixed_content</span><span class="p">()</span></code> function to draw the plotting region and bucket
labels, fetch the width and height of the canvas, and then extract the
frequency data for the provided word and calculate the maximum frequency
across that data entry (we'll explain the importance of this shortly).
The parameter word is a string representing the word whose frequency
data you want to plot (already normalized to be all lowercase) and the
parameter <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> contains the dictionary that you built up in
Milestones 2-4. The <code class="language-python highlighter-rouge"><span class="n">plot_word</span><span class="p">()</span></code> function is called every time that the
user (you) enters a word into the top text entry field (labeled "Word
to plot:") and hits <code class="language-python highlighter-rouge"><span class="o">&lt;</span><span class="n">Enter</span><span class="o">&gt;</span></code> . If you enter a word that is not
contained in <code class="language-python highlighter-rouge"><span class="n">word_data</span></code> into the top text entry field, a message will
display on the top right, and that word will not be passed along to the
<code class="language-python highlighter-rouge"><span class="n">plot_word</span></code> function.</p>

<p>When plotting the name data, you should consider the following tips
(most of which are illustrated in Figure 8):</p>

<ul>
  <li>There should be <code class="language-python highlighter-rouge"><span class="n">NUM_VERTICAL_DIVISIONS</span></code> tick marks evenly spaced
along the y-axis. Each tick mark should be represented by a line
with length <code class="language-python highlighter-rouge"><span class="n">TICK_WIDTH</span></code> and horizontally centered on the y-axis.
When drawing line segments, you want them to appear to be the same
thickness as the boundary line. To accomplish this, include the
optional <code class="language-python highlighter-rouge"><span class="n">width</span><span class="o">=</span><span class="n">LINE_WIDTH</span></code> parameter in any calls to
<code class="language-python highlighter-rouge"><span class="n">create_line</span><span class="p">()</span></code></li>
  <li>For each tick mark on the y-axis, you should add a label
representing frequency, which should be vertically centered on the
corresponding tick mark. The label for the lowest tick mark should
have value 0 and the label for the highest tick mark should have a
value of <code class="language-python highlighter-rouge"><span class="n">max_frequency</span></code> (the maximu frequency across all genders
and rating review buckets), which we have already calculated for
you. The remaining labels should be evenly spaced between 0 and the
value of the highest label. All labels should be evenly spaced along
the y-axis of the plotting area and be offset by <code class="language-python highlighter-rouge"><span class="n">LABEL_OFFSET</span></code>
pixels to the left of the left edge of the plotting area along the
x-axis. All labels should be represented as integer values. When
calling the <code class="language-python highlighter-rouge"><span class="n">create_text</span><span class="p">()</span></code> function for these labels, you should
specify <code class="language-python highlighter-rouge"><span class="n">anchor</span><span class="o">=</span><span class="n">tkinter</span><span class="p">.</span><span class="n">E</span></code> as the last parameter to indicate that
the <code class="language-python highlighter-rouge"><span class="n">x</span><span class="p">,</span><span class="n">y</span></code> point is at the right-center edge of the text.</li>
  <li>For each comment source, the graph will have one bar to represent
the frequency for women and one bar for men, side by side. The bars
for women will be one color, and the bars for men will be another.
You can choose any colors for your bars as long as the bar for women
is on the left and the bar for men is on the right and the color is
light enough that you can read the gender label (discussed below).
The color of a rectangle can be specified with the optional
<code class="language-python highlighter-rouge"><span class="n">fill</span><span class="o">=</span><span class="n">color</span></code> parameter to <code class="language-python highlighter-rouge"><span class="n">create_rectangle</span><span class="p">()</span></code>. List of recognized
tkinter colors
<a href="https://www.tcl.tk/man/tcl8.6/TkCmd/colors.html">here</a>.
In our diagrams we used <code class="language-python highlighter-rouge"><span class="s">'dodgerblue'</span></code> for the left bar and
<code class="language-python highlighter-rouge"><span class="s">'orange'</span></code> for the right bar.</li>
  <li>The two bars for each label/bucket should be centered on the same x
coordinate that the label is centered on (indicated with dashed
lines in Figure 8). Hint: We encouraged you to decompose the
<code class="language-python highlighter-rouge"><span class="n">get_centered_x_coordinate</span><span class="p">()</span></code> function for a reason!</li>
  <li>The height of each bar should be calculated such that frequency 0 is
at the bottom of the graph, the maximum frequency is near the top of
the graph, and all other frequencies are evenly-spaced in between.
The width of each bar is given by the <code class="language-python highlighter-rouge"><span class="n">BAR_WIDTH</span></code> parameter. When
indexing into the gender_data dictionary you can make use of the two
constants from the earlier part of the assignment by using
<code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">KEY_WOMEN</span></code> and <code class="language-python highlighter-rouge"><span class="n">biasbarsdata</span><span class="p">.</span><span class="n">KEY_MEN</span></code>.</li>
  <li>For each bar, also display a label at the top of the bar that shows
<code class="language-python highlighter-rouge"><span class="err">‚Äú</span><span class="n">W</span><span class="err">‚Äù</span></code> if the bar represents frequency for women and <code class="language-python highlighter-rouge"><span class="err">‚Äú</span><span class="n">M</span><span class="err">‚Äù</span></code> if for
men. This gender label should have a buffer of <code class="language-python highlighter-rouge"><span class="n">TEXT_DX</span></code>
horizontally from the top-left corner of each bar ‚Äì the
y-coordinate should be the same as the y-coordinate of the top of
the corresponding bar. You should not display this label if the
frequency of that bar is 0. When calling the <code class="language-python highlighter-rouge"><span class="n">create_text</span><span class="p">()</span></code>
function for these labels, you should specify <code class="language-python highlighter-rouge"><span class="n">anchor</span><span class="o">=</span><span class="n">tkinter</span><span class="p">.</span><span class="n">NW</span></code> as
the last parameter to indicate that the <code class="language-python highlighter-rouge"><span class="n">x</span><span class="p">,</span><span class="n">y</span></code> point is at the
top-left edge of the text.</li>
</ul>

<p><img src="./CS106A Handout 14 - Assignment 6_files/14figure8.png" alt="Annotated image of plot of word frequency data drawn in BiasBars
window.">
<strong>Figure 8.</strong> Example BiasBars plot with
labeled constants in use for different components of plot</p>

<p>If you are having trouble getting the right coordinates for your lines
or labels in your graph, try printing the <code class="language-python highlighter-rouge"><span class="n">x</span><span class="o">/</span><span class="n">y</span></code> coordinates to check
them. When writing programs involving graphics, you can still print to
the Python console. This is a useful way to debug parts of your program,
as you can just print out particular values and see if they match what
you were expecting them to be.</p>

<p>Once you think you have your code working, you should test by entering
some words (one at a time) in the top text entry bar of the Bias Bars
window. We've provided some examples of sample output throughout this
handout, so just make sure your visualization matches up with those
examples!</p>

<p><img src="./CS106A Handout 14 - Assignment 6_files/14figure9.png" alt="Final BiasBars program showing both plotting nad serch
functionality"> 
<strong>Figure 9.</strong> Final example run of the whole
BiasBars program, with both plotting and search demonstrated.</p>

<p>Congratulations! You've wrangled a tough real-world dataset and built a
cool visualization!</p>

<h3 id="milestone-8-identifying-bias-in-the-dataset-and-other-interesting-data-science-ethics-questions">Milestone 8: Identifying bias in the dataset and other interesting data science ethics questions</h3>

<p><strong>In this milestone you are going to think critically about the
RateMyProfessors.com dataset and reflect on the relevant ethical issues
that computer scientists should consider when working on data science
problems.You will be answering the following questions in
<code class="language-python highlighter-rouge"><span class="n">ethics</span><span class="p">.</span><span class="n">txt</span></code>.</strong></p>

<p>Throughout the quarter, we've asked you to wrap-up your assignments by
reflecting on relevant ethical issues related to the programs that
you've implemented. Along the way we've covered topics of image
manipulation and idealization, efficacy of simulation, and thoughts
around the importance of representation. The ethics activity this week
will be a culmination of all the critical thinking skills you've
developed over the course of the last few assignments and will be more
substantial than usual, given the many critical issues that can arise
when working with datasets that have real data that is based on data
describing real people. Remember our moral from the earlier tale of
Microsoft's Chatbot or Google's Translation software? That is,
<strong>computer scientists need to consider the social impacts of their work
at the beginning of their design process</strong>. We hope that these questions
will provide a foundation for you to think critically about the social
impacts of your work as you continue on into the wonderful field of
computer science! As usual, please take the time to seriously think
about each of the questions presented below and answer each in at least
2-3 well thought-out sentences.</p>

<ol>
  <li>Plot a few "neutral" words such as class, the, and teach. What do
you see? Now plot a few more "loaded" words (thick normative terms)
to investigate potential biases in the dataset. Possible examples:
funny, rude, professor, teacher, mean, fair, unfair, genius,
brilliant. What do you see? Include at least three "loaded" words
and their corresponding frequencies for men and women for the high,
medium, and low groups in your <code class="language-python highlighter-rouge"><span class="n">ethics</span><span class="p">.</span><span class="n">txt</span></code> file.</li>
  <li>Based on the definition of bias presented in class on Monday,
May 16th:
    <ol>
      <li>Do the summary statistics you produced in Milestone 1 (that is,
percentage of reviews by gender that are high) suggest that
<em>high ratings</em> are biased by gender or not?</li>
      <li>Which of the words you plotted in the first question of this
milestone show a gendered bias?</li>
    </ol>
  </li>
  <li>Based on the definitions of fairness presented in class, under what
conditions (that could be observed from a dataset like this) would
it be <em>unfair</em> for a university to use either the ratings or the
prevalence of particular words (such as brilliant or genius) as a
factor in decisions to hire, tenure, or fire professors? Assume the
universities are using end-of-term student evaluations written by
their own students, which might have different distributions.</li>
  <li>What kind of information do the subjects represented in a dataset
(in this case, professors) deserve to know about the trends in the
data? How could you as the programmer provide this information?</li>
  <li>In class, we discussed problems of underrepresentation and "long
tails" in data science. Although the data we gave you has not been
edited other than to remove punctuation, our visualization focuses
on average scores and commonly used words. What kinds of
interactions between students and teachers, both positive and
negative, might be uncommon or not well represented by this dataset
but important? For example, how might underrepresented students'
positive experiences of underrepresented teachers appear or not
appear in this dataset?</li>
  <li>In this assignment, we asked you, <em>"does a professor's gender
influence the language people use to describe them?"</em> That is an
important question, and we haven't given you the right kind of data
to fully answer it: the dataset presents a binary classification of
gender based on students' beliefs as to the gender of the professor.
There are some people in the dataset whose gender is misdescribed,
and others, such as non-binary people, who do not have a category
that fits them at all. If you could design the ratings website, how
might you change or remove categories to address this problem?</li>
  <li>In 106A, we create clearly-defined assignments for you to work on.
We tell you what to do at each step and what counts as success at
the end. In other words, we are <em>formulating problems</em> for you to
solve. As we discussed in class, however, problem formulation is one
of the ways in which your choices as a computer scientist embed
values. Formulate a different problem related to the topics of
professor evaluation or visualization of gendered patterns in
language use, ideally one you could solve with your current skills.
Explain why and for whom it would be good to solve that problem.</li>
</ol>

<p>Once you've finished through thinking through and answering all these
questions, make sure to stop and really admire the magnitude of what
you've accomplished! You've wrangled a complex real-world dataset and
used it to flex your ethical and critical thinking skills. Congrats on
making it to the end!</p>

<h3 id="optional-extraextension-features">Optional Extra/Extension Features</h3>

<p>There are many possibilities for optional extra features that you can
add if you like, potentially for extra credit. If you are going to do
this, please submit two versions of your program: one that meets all the
assignment requirements, and a second extended version. As usual, in the
Assignment 6 project folder, you can create a file called <code class="language-python highlighter-rouge"><span class="n">extension</span><span class="p">.</span><span class="n">py</span></code>
that you can use if you want to write any extensions based on this
assignment. You can potentially have more than one extension file if you
are, say, extending both the data processing portion and the graphics
portion of the assignment. At the top of the files for an extended
version (if you submit one), in your comment header, you should comment
what extra features you completed.</p>

<p>Here are a few extension ideas:</p>

<ul>
  <li>Plot data for more than one word at once. Right now, our program is
limited to plot word frequency data for only one word at a time. See
if you can extend that functionality by plotting multiple bars on
the graph, either horizontally or vertically. When you enter content
in the top text field, your <code class="language-python highlighter-rouge"><span class="n">plot_word</span></code> function gets back the whole
string inputted there, so you can enter multiple words separated by
spaces and handle that sort of input in the <code class="language-python highlighter-rouge"><span class="n">plot_word</span></code> function.</li>
  <li>Visualize another dataset. Can you use your program to visualize a
dataset from a different data source? What other data sets are you
able to plot? The world is your oyster! We've posted a separate
Guided Extension handout on the assignment page with suggestions for
a few datasets for you to use.</li>
</ul>

<h3 id="submitting-your-work">Submitting your work</h3>

<p>Once you've gotten all the parts of this assignment working, you're
ready to submit!</p>

<p>Make sure to submit only the python files you modified for this
assignment on Paperless. You should make sure to submit the files:</p>

<ul>
  <li>data_analysis.py</li>
  <li>biasbarsdata.py</li>
  <li>biasbars.py</li>
  <li>ethics.txt</li>
</ul>

<h3 id="a-brief-history-of-biasbars">A Brief History of BiasBars</h3>

<p>BiasBars is a spinoff of NameSurfer, a past CS106A assignment developed
by Stanford lecturer Nick Parlante that asked students to graph data
about the popularity of baby names over time. For an ethics-themed
hackathon in April 2018, Jennie Yang and Monica Anuforo, two of our
awesome section leaders in the CS198 program decided to create a parody
of NameSurfer that instead graphed information about gender and
RateMyProfessor reviews, based on an applet created by history professor
Ben Schmidt of Northeastern University. (The data you will be using for
this assignment will be very similar, but not from the exact same source
as Professor Schmidt's applet.) Monica and Jennie worked with Colin
Kincaid, a former CS198 Coordinator and CS106A Lecturer, to turn the
NameSurfer spinoff developed at the hackathon into the original Bias
Bars assignment, which was done in Java and assigned in the summer of</p>
<ol>
  <li>The ethical themes explored by their assignment played really well
with so many of the topics that we've covered in the course this
quarter that the course staff decided to port the Bias Bars assignment
to Python ‚Äì now here we are!</li>
</ol>

</div>
        <div class="col-xs-hidden col-md-2"><nav class="fixed-top-right toc" id="toc"><ol class="toc-list "><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#sandcastle-practice-with-dictionaries" class="toc-link node-name--H2 ">Sandcastle: Practice with Dictionaries</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#sandcastle-part-a-reading-the-file" class="toc-link node-name--H3 ">Sandcastle Part A: Reading the file</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#sandcastle-part-b-calculating-the-number-of-infections-per-day" class="toc-link node-name--H3 ">Sandcastle Part B: Calculating the number of infections per day</a></li></ol></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#main-program-analyzing-data-bias" class="toc-link node-name--H2 ">Main Program: Analyzing Data Bias</a><ol class="toc-list  is-collapsible"><li class="toc-list-item is-active-li"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#introduction" class="toc-link node-name--H3  is-active-link">Introduction</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#assignment-overview" class="toc-link node-name--H3 ">Assignment Overview</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#milestone-1-understanding-the-dataset-by-calculating-summary-statistics" class="toc-link node-name--H3 ">Milestone 1: Understanding the dataset by calculating summary statistics</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#milestone-2-building-the-word_data-variable-needed-for-our-data-visualization" class="toc-link node-name--H3 ">Milestone 2: Building the word_data variable needed for our data visualization</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#effectively-structuring-data" class="toc-link node-name--H4 ">Effectively structuring data</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#testing-milestone-2" class="toc-link node-name--H4 ">Testing Milestone 2</a></li></ol></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#milestone-3-processing-a-whole-file-of-review-data" class="toc-link node-name--H3 ">Milestone 3: Processing a whole file of review data</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#milestone-4-searching-for-words-in-the-dataset" class="toc-link node-name--H3 ">Milestone 4: Searching for words in the dataset</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#testing-milestones-2-4" class="toc-link node-name--H4 ">Testing Milestones 2-4</a></li></ol></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#milestone-5-running-the-provided-graphics-code" class="toc-link node-name--H3 ">Milestone 5: Running the provided graphics code</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#milestone-6-drawing-the-fixed-background-content" class="toc-link node-name--H3 ">Milestone 6: Drawing the fixed background content</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#milestone-7-plotting-the-word-frequency-data" class="toc-link node-name--H3 ">Milestone 7: Plotting the word frequency data</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#milestone-8-identifying-bias-in-the-dataset-and-other-interesting-data-science-ethics-questions" class="toc-link node-name--H3 ">Milestone 8: Identifying bias in the dataset and other interesting data science ethics questions</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#optional-extraextension-features" class="toc-link node-name--H3 ">Optional Extra/Extension Features</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#submitting-your-work" class="toc-link node-name--H3 ">Submitting your work</a></li><li class="toc-list-item"><a href="https://web.stanford.edu/class/archive/cs/cs106a/cs106a.1226/handouts/biasbars-handout.html#a-brief-history-of-biasbars" class="toc-link node-name--H3 ">A Brief History of BiasBars</a></li></ol></li></ol></nav></div>
    </div>

    <script src="./CS106A Handout 14 - Assignment 6_files/tocbot.min.js.download"></script>
    <link rel="stylesheet" href="./CS106A Handout 14 - Assignment 6_files/tocbot.css">

    <script>
      tocbot.init({
        // Where to render the table of contents.
        tocSelector: '#toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '#content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h2, h3, h4',
      });
    </script>



</div>

<style>
    p.attribution {
        font-style: italic;
        font-size: 80%;
        text-align: right;
    }
    .body-container {
        margin: 0 10%;
        max-width: 55em;
        width: 80%;
    }
    a.toc-link {
      color: #aaa !important;
      font-size: 90%;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
    }
    .fixed-top-right {
        position: fixed;
        margin-top: 0;
        margin-left: 0;
    }
</style>

</main>
    <style>
#footer {
    font-size: 70%;
    color:green;
    text-align: center;
    font-style: italic;
    padding: 5px;
}
</style>
<div id="footer" class="mt-auto">
    All course materials ¬© Stanford University 2021 <br>
    Website programming by Julie Zelenski ‚Ä¢ Styles adapted from Chris Piech ‚Ä¢
    This page last updated 2022-May-15
</div>


  

  <!-- Bootstrap JavaScript -->
  <script src="./CS106A Handout 14 - Assignment 6_files/bootstrap.min.js.download"></script>
  <script src="./CS106A Handout 14 - Assignment 6_files/popper.min.js.download"></script>

  <script src="./CS106A Handout 14 - Assignment 6_files/jquery.min.js.download"></script>


</body></html>